@model IEnumerable<NiceHandles.Models.vInOut>
@using NiceHandles.Models

@{
    ViewBag.Title = "Thu chi";
    var db = new NHModel();
}
<h2>
    Danh sách khoản thu chi chờ chuyển thủ quỹ
    <button type="button" style="float: right; margin-right: 10px;" class="btn btn-info" onclick="Print();">Chuyển thủ quỹ</button>
</h2>
<div style="border-radius: 10px; background-color: aliceblue; padding: 15px;" class="row">
    <div class="col-sm-4">Tổng thu: <b> @ViewBag.TONGTHU </b></div>
    <div class="col-sm-4">Tổng chi: <b>@ViewBag.TONGCHI </b></div>
    <div class="col-sm-4">Thu - Chi: <b>@ViewBag.THUCHI </b></div>
</div>
<table class="table table-hover">
    <thead>
        <tr>
            <th>
                Người thực hiện
            </th>
            <th>
                Loại
            </th>
            <th>
                Loại chi tiết
            </th>
            <th>
                Thời gian
            </th>
            <th>
                Số tiền
            </th>
            <th style="width: 250px">
                Ghi chú
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr class="@item.type==(int)XCategory.eType.Chi ? " text-danger" : null )">
                <td>@Html.ActionLink(item.fullname, "Details", new { id = item.id }) </td>
                <td>@Html.ActionLink(XCategory.sType[item.type], "Details", new { id = item.id }) </td>
                <td>@Html.Raw(item.name)</td>
                <td>@item.time.ToString("dd/MM/yyyy")</td>
                <td>@((item.type==(int)XCategory.eType.Chi ? "-" : null) + item.amount.ToString("N0"))</td>
                <td>@item.note</td>
            </tr>
        }
    </tbody>
</table>
<iframe id="my_iframe" style="display:none;"></iframe>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        function Print() {
            $.ajax({
                url: '/InOuts/GoStockPrint',
                data: {
                },
                type: "GET",
                dataType: "JSON",
                success: function (url) {
                    document.getElementById('my_iframe').src = url;
                }
            });
        }
    </script>
}
